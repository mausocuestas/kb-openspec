---
// src/components/DocumentMetadata.astro
import { Badge } from './ui/badge.tsx';

interface Props {
  frontmatter: {
    status?: string;
    versao?: string;
    data_ultima_atualizacao?: string;
    autor_original?: string[];
    ultima_atualizacao_por?: string[];
    data_publicacao?: string;
    tipo_documento?: string;
    area_responsavel?: string;
    codigo?: string;
    [key: string]: any;
  };
}

const { frontmatter } = Astro.props;

// Formatação de data para o padrão brasileiro
const formatDate = (dateString: string) => {
  if (!dateString) return '';
  try {
    return new Date(dateString).toLocaleDateString('pt-BR');
  } catch (e) {
    return dateString;
  }
};

// Extrair o primeiro autor da lista, se for um array
const getFirstAuthor = (authors: string[] | string | undefined) => {
  if (!authors) return '';
  if (Array.isArray(authors)) return authors[0];
  return authors;
};
---

<div class="document-metadata flex flex-wrap items-center gap-2 mt-2 mb-4 text-sm">
  {frontmatter.codigo && (
    <Badge variant="info">Código: {frontmatter.codigo}</Badge>
  )}
  
  {frontmatter.versao && (
    <Badge variant="outline">Versão: {frontmatter.versao}</Badge>
  )}
  
  {frontmatter.data_ultima_atualizacao && (
    <Badge variant="outline">Atualizado em: {formatDate(frontmatter.data_ultima_atualizacao)}</Badge>
  )}
</div>

<style>
  .document-metadata {
    opacity: 0.9;
  }
</style>